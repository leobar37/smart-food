fragment OrderFragment on Order {
  id
  orderNumber
  createdAt
  status
  linesCount
  total
  metadata
}

fragment OrderOutputFragment on OrderOutput {
  id
  orderNumber
  createdAt
  status
  linesCount
  total
  metadata
}

query getOrder($id: ID) {
  order(where: { id: $id }) {
    ...OrderFragment
    lines {
      id
      selection
      quantity
      total
    }
  }
}

query getOrderLineCount($id: ID) {
  order(where: { id: $id }) {
    id
    linesCount
  }
}

mutation patchOrder($email: String, $metadata: Metadata, $orderId: String) {
  makeOrder(email: $email, metadata: $metadata, orderId: $orderId) {
    ...OrderOutputFragment
  }
}

mutation patchOrderLine(
  $orderId: String
  $orderLineId: String
  $orderLine: OrderLineItem
) {
  patchOrderLine(
    orderId: $orderId
    orderLineId: $orderLineId
    orderLine: $orderLine
  ) {
    ...OrderOutputFragment
    lines {
      id
      selection
      quantity
      orderId
      total
      productId
    }
  }
}

mutation deleteOrderLine($orderId: String, $lineOrderId: String) {
  customDeleteOrderLine(orderId: $orderId, lineOrderId: $lineOrderId) {
    ...OrderOutputFragment
    lines {
      id
      selection
      quantity
      orderId
      total
      productId
    }
  }
}
